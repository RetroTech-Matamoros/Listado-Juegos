<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Instalaci√≥n de Juegos</title>

<style>

/* =========================
   CRT RETRO MODERNO
========================= */

body{
  background:#0b0b0b;
  color:#00ff99;
  font-family:'Courier New', monospace;
  text-align:center;
  margin:0;
}

/* scanlines */
body::after{
  content:"";
  pointer-events:none;
  position:fixed;
  width:100%;
  height:100%;
  background:repeating-linear-gradient(
    to bottom,
    transparent 0px,
    transparent 2px,
    rgba(0,0,0,0.25) 3px
  );
}

.container{
  max-width:950px;
  margin:auto;
  padding:20px;
  box-shadow:0 0 25px #00ff99;
  border-radius:12px;
  margin-top:20px;
  animation:fade .4s ease;
}

@keyframes fade{
  from{opacity:0; transform:translateY(10px);}
  to{opacity:1; transform:translateY(0);}
}

h1,h2{
  color:#00ffff;
}

/* inputs */

select,input{
  width:100%;
  padding:10px;
  margin:8px 0;
  background:#111;
  color:#fff;
  border:2px solid #00ff99;
  border-radius:6px;
}

/* botones */

button{
  padding:10px;
  margin:8px 0;
  background:#00ff99;
  color:#000;
  font-weight:bold;
  border:none;
  border-radius:6px;
  cursor:pointer;
}

button:hover{
  background:#00ffff;
}

/* progreso */

.progress{
  height:20px;
  background:#333;
  border-radius:10px;
}

.bar{
  height:100%;
  width:0%;
  background:#00ff99;
  transition:.3s;
}

/* grid juegos */

.grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(160px,1fr));
  gap:12px;
  margin-top:15px;
}

.card{
  background:#111;
  border:2px solid #00ff99;
  border-radius:10px;
  padding:10px;
  cursor:pointer;
  transition:.15s;
}

.card:hover{
  transform:scale(1.05);
  box-shadow:0 0 10px #00ffff;
}

.card input{
  margin-bottom:6px;
}

.smallBtn{
  background:#222;
  color:#00ff99;
  border:1px solid #00ff99;
}

.smallBtn:hover{
  background:#00ff99;
  color:#000;
}

</style>
</head>


<body>

<!-- =========================
   SELECTOR CONSOLA
========================= -->

<div id="consoleSection" class="container">

<h2>üéÆ Selecciona consola</h2>

<select id="consoleSelect">
  <option value="">Elegir...</option>
  <option value="Switch">üü¶ Switch</option>
  <option value="GameCube">üü™ GameCube</option>
  <option value="PSP">‚¨õ PSP</option>
</select>

<button onclick="start()">Continuar</button>

</div>



<!-- =========================
   JUEGOS
========================= -->

<div id="gamesSection" class="container" style="display:none;">
<img src="logo.png" class="logo">


<button class="smallBtn" onclick="volver()">‚Üê Cambiar consola</button>

<h1>üéÆ Instalaci√≥n de Juegos</h1>

<input id="nombre" placeholder="Nombre del cliente">

<select id="capacidad">
  <option value="32">32 GB</option>
  <option value="64">64 GB</option>
  <option value="128">128 GB</option>
</select>

<input id="buscador" placeholder="üîç Buscar juego...">

<h2 id="uso">0 / 32 GB</h2>

<div class="progress">
  <div class="bar" id="bar"></div>
</div>

<div id="lista" class="grid"></div>

<button onclick="enviar()">Enviar pedido</button>

</div>



<script>

/* =========================
   VARIABLES
========================= */

let consolaActiva="";

const juegos={
  "Switch":[["Zelda BOTW",15],["Mario Kart 8",7],["Smash Bros",14]],
  "GameCube":[["Mario Sunshine",1.5],["Luigi Mansion",1.2],["Wind Waker",1.4]],
  "PSP":[["God of War",1.6],["GTA Vice City",1.7],["Monster Hunter",1.3]]
};

const lista=document.getElementById("lista");
const buscador=document.getElementById("buscador");


/* =========================
   CAMBIO PANTALLAS
========================= */

function start(){
  const val=document.getElementById("consoleSelect").value;

  if(!val) return alert("Selecciona una consola");

  consolaActiva=val;

  document.getElementById("consoleSection").style.display="none";
  document.getElementById("gamesSection").style.display="block";

  render();
}

function volver(){
  document.getElementById("gamesSection").style.display="none";
  document.getElementById("consoleSection").style.display="block";
  consolaActiva="";
  lista.innerHTML="";
}


/* =========================
   RENDER TARJETAS
========================= */

function render(){

  if(!consolaActiva) return;

  lista.innerHTML="";

  juegos[consolaActiva].forEach(j=>{

    if(!j[0].toLowerCase().includes(buscador.value.toLowerCase())) return;

    lista.innerHTML+=`
      <label class="card">
        <input type="checkbox" value="${j[1]}" data-name="${j[0]}">
        üéÆ <b>${j[0]}</b><br>
        üíæ ${j[1]} GB
      </label>
    `;
  });

  activar();
}

buscador.addEventListener("input",render);


/* =========================
   CAPACIDAD
========================= */

function activar(){
  document.querySelectorAll("input[type=checkbox]")
    .forEach(c=>c.addEventListener("change",calcular));
}

function calcular(){

  let total=0;
  const cap=Number(document.getElementById("capacidad").value);

  document.querySelectorAll("input[type=checkbox]").forEach(c=>{
    if(c.checked) total+=Number(c.value);
  });

  if(total>cap){
    alert("Excede la capacidad");
    this.checked=false;
    return;
  }

  document.getElementById("uso").textContent=`${total} / ${cap} GB`;
  document.getElementById("bar").style.width=(total/cap*100)+"%";
}


/* =========================
   ENVIAR
========================= */

async function enviar(){

  let juegosSel=[];
  let total=0;

  document.querySelectorAll("input[type=checkbox]").forEach(c=>{
    if(c.checked){
      juegosSel.push(c.dataset.name);
      total+=Number(c.value);
    }
  });

  await fetch("https://script.google.com/macros/s/AKfycbzliHQEMx-QuS8B5Yi5r5DbPvT7sJ0fDGl4Ivhm8OjfLBmd2t8e9p7mGxy06BF5ZRQ/exec",{
    method:"POST",
    body:JSON.stringify({
      consola:consolaActiva,
      nombre:document.getElementById("nombre").value,
      capacidad:document.getElementById("capacidad").value,
      juegos:juegosSel.join(", "),
      espacio:total
    })
  });

  alert("Pedido enviado ‚úÖ");
}

</script>

</body>
</html>



