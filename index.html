<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>InstalaciÃ³n de Juegos</title>

<style>

  /* ===== CRT RETRO EFFECT ===== */

body{
  background:#0a0a0a;
  color:#00ff66;
  text-shadow:
    0 0 4px #00ff66,
    2px 0 2px #ff0033,
   -2px 0 2px #00ccff;
}

/* scanlines */
body::after{
  content:"";
  pointer-events:none;
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  background:repeating-linear-gradient(
    to bottom,
    rgba(0,0,0,0) 0px,
    rgba(0,0,0,0) 2px,
    rgba(0,0,0,0.25) 3px
  );
  z-index:999;
}

/* flicker suave */
@keyframes flicker{
  0%{opacity:0.95;}
  50%{opacity:1;}
  100%{opacity:0.96;}
}

body{
  animation:flicker 0.15s infinite;
}

/* bordes glow */
.container{
  box-shadow:0 0 20px #00ff66;
}

/* botones retro */
button{
  background:#001a00;
  color:#00ff66;
  border:2px solid #00ff66;
  box-shadow:
    0 0 8px #00ff66,
    2px 0 4px #ff0033,
   -2px 0 4px #00ccff;
}

button:hover{
  background:#003300;
  box-shadow:0 0 20px #00ff66;
}

/* inputs retro */
input, select{
  background:#001a00;
  color:#00ff66;
  border:1px solid #00ff66;
}

/* barra neon */
.bar{
  background:#00ff66;
  box-shadow:0 0 10px #00ff66;
}

body{
  background:#0b0b0b;
  color:#00ff99;
  font-family: 'Courier New', monospace;
}

.container{
  max-width:900px;
  margin:auto;
  padding:20px;
}

.logo{
  display:block;
  margin:auto;
  max-width:200px;
}

h1,h2{
  text-align:center;
  color:#00ffff;
}

select,input{
  width:100%;
  padding:8px;
  margin:10px 0;
  background:#111;
  color:#00ff99;
  border:1px solid #00ff99;
}

.console{
  margin-top:25px;
  padding:15px;
  border:1px solid #00ff99;
  border-radius:10px;
}

.game{
  margin:4px 0;
}

.progress{
  height:22px;
  background:#333;
  border-radius:10px;
  margin-top:10px;
}

.bar{
  height:100%;
  width:0%;
  background:#00ff99;
  border-radius:10px;
}

button{
  margin-top:20px;
  width:100%;
  padding:12px;
  background:#00ff99;
  font-weight:bold;
  cursor:pointer;
}
</style>
</head>

<body>

  <!-- ===== PANTALLA CONSOLA ===== -->
<div id="consoleSection">

  <h1>ðŸŽ® Selecciona tu consola</h1>

  <button onclick="selectConsole('Switch')">Switch</button>
  <button onclick="selectConsole('GameCube')">GameCube</button>
  <button onclick="selectConsole('PSP')">PSP</button>

</div>

<div class="container">

<img src="logo.png" class="logo">

<h1>ðŸŽ® InstalaciÃ³n de Juegos</h1>

<input id="nombre" placeholder="Nombre del cliente">

<select id="capacidad">
  <option value="32">32 GB</option>
  <option value="64">64 GB</option>
  <option value="128">128 GB</option>
</select>

<input id="buscador" placeholder="ðŸ” Buscar juego...">

<h2 id="uso">0 / 32 GB</h2>

<div class="progress">
  <div class="bar" id="bar"></div>
</div>

<div id="lista"></div>

<button type="button" onclick="enviar()">Enviar pedido</button>

</div>

<script>

  <div id="gamesSection" style="display:none;">

const juegos = {
  "ðŸŸ¥ Switch": [
    ["Zelda BOTW",15],
    ["Mario Kart 8",7],
    ["Smash Bros",14]
  ],
  "ðŸŸª GameCube": [
    ["Mario Sunshine",1.5],
    ["Luigi Mansion",1.2],
    ["Zelda Wind Waker",1.4]
  ],
  "ðŸ”µ PSP": [
    ["God of War",1.6],
    ["GTA Vice City",1.7],
    ["Monster Hunter",1.3]
  ]
};

const lista = document.getElementById("lista");
const buscador = document.getElementById("buscador");

function render(){
  lista.innerHTML="";
  for(const consola in juegos){
    let html = `<div class="console"><h3>${consola}</h3>`;
    juegos[consola].forEach(j=>{
      if(j[0].toLowerCase().includes(buscador.value.toLowerCase())){
        html+=`
        <div class="game">
          <label>
            <input type="checkbox" value="${j[1]}" data-name="${j[0]}">
            ${j[0]} (${j[1]} GB)
          </label>
        </div>`;
      }
    });
    html+="</div>";
    lista.innerHTML+=html;
  }
  activar();
}

render();
buscador.addEventListener("input",render);

function activar(){
  document.querySelectorAll("input[type=checkbox]")
    .forEach(c=>c.addEventListener("change",calcular));
}

function calcular(){
  let total=0;
  const cap=Number(document.getElementById("capacidad").value);
  document.querySelectorAll("input[type=checkbox]").forEach(c=>{
    if(c.checked) total+=Number(c.value);
  });
  if(total>cap){
    this.checked=false;
    alert("Excede la capacidad");
    return calcular();
  }
  document.getElementById("uso").textContent=`${total} / ${cap} GB`;
  document.getElementById("bar").style.width=(total/cap*100)+"%";
}

async function enviar(){
  alert("FUNCION EJECUTADA");
  let juegosSel=[];
  let total=0;
  document.querySelectorAll("input[type=checkbox]").forEach(c=>{
    if(c.checked){
      juegosSel.push(c.dataset.name);
      total+=Number(c.value);
    }
  });

  await fetch("https://script.google.com/macros/s/AKfycbzliHQEMx-QuS8B5Yi5r5DbPvT7sJ0fDGl4Ivhm8OjfLBmd2t8e9p7mGxy06BF5ZRQ/exec",{
    method:"POST",
    body:JSON.stringify({
      nombre:document.getElementById("nombre").value,
      capacidad:document.getElementById("capacidad").value,
      juegos:juegosSel.join(", "),
      espacio:total
    })
  });

  alert("Pedido enviado âœ…");
}
</script>
<script>
function selectConsole(name){
  document.getElementById("consoleSection").style.display="none";
  document.getElementById("gamesSection").style.display="block";
  window.selectedConsole = name;
}
</script>

</body>
</html>







